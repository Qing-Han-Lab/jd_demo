<!DOCTYPE html>
<html lang="en">

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
  <meta name="apple-mobile-web-app-title" content="">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-touch-fullscreen" content="yes" />
  <meta http-equiv="Cache-Control" content="no-siteapp, no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL">
  <meta name="format-detection" content="telephone=no,address=no,email=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="icon" href="./favicon.ico">
  <meta name="referrer" content="no-referrer" />
  <meta name="robots" content="noindex" />
  <meta name="robots" content="nofollow" />
  <meta name="robots" content="none" />
  <meta name="googlebot" content="noindex, nofollow" />
  <meta name="baiduspider" content="noarchive" />
  <link rel="icon" href="<%= BASE_URL %>favicon.ico">
  <title>京东</title>
</head>

<body>
  <noscript>
    <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled.
      Please enable it to continue.</strong>
  </noscript>
  <div id="app"></div>
  <!-- built files will be auto injected -->
</body>
<script>
  // 监听应用是否从前台到后台
  function checkPause() {
    document.addEventListener('pause', () => {
      window.plus.nativeUI.toast('应用程序运行到后台')
    }, false)
  }
  // 监听应用是否从后台到前台
  function checkResume() {
    document.addEventListener('resume', () => {
      window.plus.nativeUI.toast('欢迎回来')
    }, false)
  }
  // 监听网络变化
  function checkNetWork() {
    document.addEventListener('netchange', () => {
      let netType = window.plus.networkinfo.getCurrentType();
      if (netType == 6) {
        window.plus.nativeUI.toast('您正在使用4G网络')
      }
    }, false)
  }
  // Android自定义返回键
  var runState = false;
  function setBackBtn() {
    plus.key.addEventListener("backbutton", ()=>{
      let allWebView = window.plus.webview.all();
      if(allWebView.length!==1){
        let currentWV = window.plus.webview.currentWebview();
        currentWV.close()
      }else{
         if(runState){
           window.plus.runtime.quit();
         }else{
           runState = true;
           window.plus.nativeUI.toast('1s内连续点击两次返回键退出应用');
           setTimeout(() => {
             runState = false
           }, 1000);
         }
      }
    },false);
  }
  // 设置系统状态栏样式
  function setStatusStyle(){
    window.plus.navigator.setStatusBarBackground('#e43130')
    window.plus.navigator.setStatusBarStyle('light')
  }
 


  document.addEventListener('plusready', () => {
    // 锁定竖屏
    window.plus.screen.lockOrientation("portrait-primary");

    setStatusStyle()
    checkPause()
    checkResume()
    checkNetWork()
    setBackBtn()

  }, false)
</script>

</html>